bundling:
  bundle_size: 100
  group_by: null

# Step 2: Preprocessing - PHIX Reference Validation
# Validates school/daycare names against the official PHIX reference list
phix_validation:
  enabled: true
  # Path to PHIX reference Excel file (relative to project root)
  reference_file: PHIX Reference Lists v5.2 - 2025Jun30.xlsx
  # Minimum fuzzy match score (0-100) to consider a match
  match_threshold: 85
  # How to handle unmatched facilities: 'warn', 'error', or 'skip'
  # - warn: Log warning, continue processing all records
  # - error: Fail pipeline if any facilities don't match
  # - skip: Filter out records with unmatched facilities
  unmatched_behavior: warn
  # Match strategy: 'exact' (exact match only) or 'fuzzy' (exact then fuzzy)
  match_strategy: fuzzy

chart_diseases_header:
- Diphtheria
- Tetanus
- Pertussis
- Polio
- Hib
- Pneumococcal
- Rotavirus
- Measles
- Mumps
- Rubella
- Meningococcal
- Varicella
- Other
date_data_cutoff: '2025-08-31'
date_notice_delivery: '2025-04-08'
encryption:
  enabled: false
  password:
    template: '{date_of_birth_iso_compact}'
ignore_agents:
- RSVAb
- VarIg
- HBIg
- RabIg
- Ig
pdf_validation:
  rules:
    client_id_presence: error
    envelope_window_1_125: warn
    exactly_two_pages: warn
    signature_overflow: warn
pipeline:
  after_run:
    remove_artifacts: false
    remove_unencrypted_pdfs: false
  before_run:
    clear_output_directory: true
qr:
  enabled: false
  payload_template: https://www.test-immunization.ca/update?client_id={client_id}&dob={date_of_birth_iso}&lang={language_code}
typst:
  bin: typst
  font_path: /usr/share/fonts/truetype/freefont/
